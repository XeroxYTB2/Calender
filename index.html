<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Calendrier de l'Avent</title>
<style>
    body {
        background:#0f3f36;
        font-family: Arial, sans-serif;
        display:flex;
        flex-direction:column;
        align-items:center;
        padding:20px;
        color:white;
    }

    h1 { margin-bottom:20px; }

    #calendar {
        display:grid;
        grid-template-columns: repeat(6, 150px);
        grid-gap:15px;
    }

    .day {
        width:150px;
        height:120px;
        background:#b42222;
        color:white;
        border-radius:10px;
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        cursor:pointer;
        font-size:20px;
        transition:0.3s;
        border:3px solid #8c1e1e;
    }

    .opened {
        background:#e4d32b;
        color:black;
        border:3px solid #c7b924;
    }

    .label {
        font-size:14px;
        margin-top:6px;
    }

    #resetBtn {
        margin-top:30px;
        padding:10px 20px;
        font-size:18px;
        border:none;
        border-radius:8px;
        background:#d9534f;
        color:white;
        cursor:pointer;
        transition:0.3s;
    }

    #resetBtn:hover {
        background:#c9302c;
    }
</style>
</head>

<body>

<h1>üéÑ Calendrier de l'Avent üéÑ</h1>

<div id="calendar"></div>
<button id="resetBtn">Annuler la derni√®re ouverture</button>

<script>
// ---------------------------
// 1. G√©n√©ration dynamique des cases
// ---------------------------
const calendar = document.getElementById("calendar");

// Charger l'√©tat depuis le localStorage
let openedDays = JSON.parse(localStorage.getItem("openedDays")) || [];

function createCalendar() {
    calendar.innerHTML = "";

    for (let i = 1; i <= 24; i++) {
        const div = document.createElement("div");
        div.classList.add("day");
        div.dataset.day = i;
        div.innerHTML = `
            <div>‚≠ê</div>
            <div>${i}</div>
            <div class="label">${openedDays.includes(i) ? "D√©j√† ouverte üéÅ" : "√Ä ouvrir üéÑ"}</div>
        `;

        if (openedDays.includes(i)) div.classList.add("opened");

        div.onclick = () => openDay(i, div);

        calendar.appendChild(div);
    }
}

// ---------------------------
// 2. Lorsqu‚Äôon clique une case
// ---------------------------
function openDay(day, element) {
    alert("üéÅ Tu as ouvert la case " + day + " !");
    
    if (!openedDays.includes(day)) {
        openedDays.push(day);
        localStorage.setItem("openedDays", JSON.stringify(openedDays));
    }

    element.classList.add("opened");
    element.querySelector(".label").textContent = "D√©j√† ouverte üéÅ";
}

// ---------------------------
// 3. Bouton RESET = retire la derni√®re case ouverte
// ---------------------------
document.getElementById("resetBtn").onclick = () => {

    if (openedDays.length === 0) {
        alert("‚ùó Aucune case ouverte √† annuler.");
        return;
    }

    const last = openedDays[openedDays.length - 1];

    const confirmReset = confirm(
        "‚ùì Veux-tu vraiment annuler l‚Äôouverture de la case " + last + " ?"
    );

    if (!confirmReset) return;

    // Supprimer uniquement la DERNI√àRE case ouverte
    openedDays.pop();

    // Sauver le nouvel √©tat
    localStorage.setItem("openedDays", JSON.stringify(openedDays));

    // Recr√©er l'affichage
    createCalendar();
};

// ---------------------------
// Initialisation
// ---------------------------
createCalendar();

</script>

</body>
</html>
